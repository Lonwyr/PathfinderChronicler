<mvc:View xmlns="sap.m"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns:core="sap.ui.core"
          xmlns:unified="sap.ui.unified"
          xmlns:form="sap.ui.layout.form"
          controllerName="com.lonwyr.PathfinderChronicler.controller.CreateSheets" >
    <Page   id="page"
            floatingFooter="true"
            titleAlignment="Center"
            title="{i18n>createSheets}" >
        <VBox width="100%" >
            <form:SimpleForm
                    labelSpanM="12"
                    labelSpanL="12"
                    labelSpanXL="12" >
                <Title text="{i18n>data}" />

                <Label text="{i18n>event}" />
                <Select items="{data>/events}" id="eventSelect" >
                    <core:Item key="{data>id}" text="{data>name}" />
                </Select>

                <Label text="{i18n>date}" />
                <DatePicker
                        value="{printOptions>/date}" />

                <Label text="{i18n>xp}" />
                <SegmentedButton selectedKey="{printOptions>/xp}"
                                 class="sapUiSmallMarginBottom" >
                    <items>
                        <SegmentedButtonItem text="{i18n>quest}" key="1" />
                        <SegmentedButtonItem text="{i18n>scenario}" key="4" />
                        <SegmentedButtonItem text="{i18n>quest}" key="12" />
                    </items>
                </SegmentedButton>

                <Label text="{i18n>scenario}" />
                <Select items="{scenarios>/scenarios}" selectedKey="{printOptions>/rewardSectionFactor}" >
                    <core:Item key="{scenarios>factor}" text="{scenarios>title}" />
                </Select>

                <Label text="{i18n>treasureBundles}" />
                <StepInput
                        value="{printOptions>/treasureBundles}"
                        max="10"
                        width="100px"
                        change=".treasureBundlesChanged"
                        inputsAsTooltips="true"
                        enableTickmarks="true"
                        class="sapUiSmallMarginBottom" />

                <Label text="{i18n>fame}" />
                <StepInput
                        value="{printOptions>/fame}"
                        max="10"
                        width="100px"
                        inputsAsTooltips="true"
                    enableTickmarks="true"
                        class="sapUiSmallMarginBottom" />

                <Label text="{i18n>reputation}" />
                <StepInput
                        value="{printOptions>/reputation}"
                        max="10"
                        width="100px"
                        inputsAsTooltips="true"
                        enableTickmarks="true"
                        class="sapUiSmallMarginBottom" />
                <Label text="{i18n>additionalWithoutPlayerData}" />
                <Switch type="AcceptReject" state="{printOptions>/additionalSheet}" />
                <Label text="{i18n>GmSheet}" />
                <Switch type="AcceptReject" state="{printOptions>/printGmSheet}" />
            </form:SimpleForm>
            <Table
                    mode="Delete"
                    delete="removePlayerFromSession"
                    items="{printOptions>/players}" >
                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>players}" level="H2" />
                        <ToolbarSpacer />
                        <Button
                                icon="sap-icon://add"
                                press="addPlayerToSession" />
                    </Toolbar>
                </headerToolbar>
                <columns>
                    <Column
                            width="12em">
                        <Text text="{i18n>player}" />
                    </Column>
                    <Column
                            demandPopin="true">
                        <Text text="{i18n>character}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>gm}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>gpGained}" />
                    </Column>
                    <Column>
                        <Text text="{i18n>income}" />
                    </Column>
                </columns>
                <items>
                <ColumnListItem>
                    <cells>
                        <ObjectIdentifier
                                title="{'parts': [{'path': 'printOptions>'}, {'path': 'data>/players'}], formatter: '.formatPlayerTitle'}"
                                text="{'parts': [{'path': 'printOptions>'}, {'path': 'data>/players'}], formatter: '.formatPlayerId'}" />
                        <Button
                                icon="sap-icon://synchronize"
                                text="{'parts': [{'path': 'printOptions>'}, {'path': 'data>/players'}], formatter: '.formatCharacterButtonText'}"
                                press=".changeCharacter" />
                        <SegmentedButton selectedKey="{printOptions>type}" >
                            <items>
                                <SegmentedButtonItem text="{i18n>gm}" key="gm" />
                                <SegmentedButtonItem text="{i18n>player}" key="player" />
                            </items>
                        </SegmentedButton>
                        <Text text="{'parts': [{'path': 'printOptions>characterLevel'}, {'path': 'printOptions>/treasureBundles'}], formatter: '.formatTreasureBundles'}" />
                        <Input value="{printOptions>income}" />
                    </cells>
                </ColumnListItem>
                </items>
            </Table>
            <unified:FileUploader
                    uploadUrl = ""
                    buttonText = "{i18n>uploadChronicleTemplateAndCreateSheets}"
                    fileType = "pdf"
                    buttonOnly = "true"
                    icon = "sap-icon://upload"
                    class="sapUiMediumMargin"
                    change = ".createSheets" />
        </VBox>
        <footer>
            <core:Fragment fragmentName="com.lonwyr.PathfinderChronicler.fragments.NavigationFooter" type="XML" />
        </footer>
    </Page>
</mvc:View>